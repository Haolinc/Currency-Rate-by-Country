<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Getting Started: Serving Web Content</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
  <body>
    <p>Country 1:</p>
    <input type="text">
    <p>Country 2:</p>
    <input type="text">
    <h1 th:text="${message}">Default Message</h1>
    <p>Get your greeting <a href="/home">here</a></p>
    <p th:text="|Hello, ${home}!|" />

    <form id="currencyForm">
      <label for="country1">Country 1:</label>
      <input type="text" id="country1" name="country1">

      <label for="country2">Country 2:</label>
      <input type="text" id="country2" name="country2">
    </form>

    <script>
        document.getElementById('currencyForm').addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent form from submitting the traditional way

            // Get form input values
            const country1 = document.getElementById('country1').value;
            const country2 = document.getElementById('country2').value;

            // Fetch the currency rate from the API endpoint
            fetch(`/api/currencyAmount?country1=${country1}&country2=${country2}`)
                .then(response => response.json())  // Parse the JSON response
                .then(data => {
                    // Display the result
                    document.getElementById('rateResult').innerText = `Exchange rate from ${country1} to ${country2} is: ${data}`;
                })
                .catch(error => console.error('Error fetching currency rate:', error));
        });
  </script>
  </body>
</html>